<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>iPayrollÂ® | Uploading Timesheets</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Documentation on how to connect to iPayroll's API services">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" >
	<meta property="og:title" content="New Zealand's Premier Online Payroll Service" />
	<meta property="og:description" content="Manage your pay runs, leave, tax and employee records in the cloud" />
	<meta property="og:image" content="https://www.ipayroll.co.nz/images/iPayroll-media.jpg" />
	<link rel="shortcut icon" href="https://www.ipayroll.co.nz/images/ipayroll.ico" type="image/x-icon" />
	<link rel="stylesheet" href="css/material.core.css">
	<link rel="stylesheet" href="css/theme.ipayroll.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
</head>
<body>
	<div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
		<header class="mdl-layout__header">
    	<div class="mdl-layout__header-row">
			<span class="mdl-layout-title">Developer's Guide</span>
      		<div class="mdl-layout-spacer"></div>
				<nav class="mdl-navigation mdl-layout--large-screen-only">
					<a id="menu-reference" class="mdl-navigation__link" href="/">API Reference</a>
					<a id="menu-authorisation" class="mdl-navigation__link" href="authorisation.html">Authorisation</a>
					<a id="menu-uploading" class="mdl-navigation__link" href="uploading.html">Uploading Timesheets</a>
				</nav>
				<button class="android-more-button mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect mobile-only" id="more-button">
					<i class="material-icons">more_vert</i>
				</button>
				<ul id="menu-more" class="mdl-menu mdl-js-menu mdl-menu--bottom-right mdl-js-ripple-effect mobile-only" for="more-button">
					<li class="mdl-menu__item"><a id="menu-reference" href="index.html">API Reference</a></li>
					<li class="mdl-menu__item"><a id="menu-authorisation" href="authorisation.html">Authorisation</a></li>
					<li class="mdl-menu__item"><a id="menu-uploading" href="uploading.html">Uploading Timesheets</a></li>
				</ul>	
   	 	</div>
  	</header>		<div id="second-drawer" class="mdl-layout__drawer">
			  		<span>
      		<div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable mdl-textfield--floating-label mdl-textfield--align-right">
        		<div class="mdl-textfield__expandable-holder">
          			<input class="mdl-textfield__input" type="text" name="sample" id="fixed-header-drawer-exp">
        		</div>
        		<label class="mdl-button mdl-js-button mdl-button--icon" for="fixed-header-drawer-exp">
          			<i class="material-icons">search</i>
        		</label>		
      		</div>	
		</span>			<nav id="main-authorisation-list" class="mdl-navigation">

			</nav>
		</div> 
		<div class="mdl-layout__drawer">
			<span class="mdl-layout-title"><a href="https://www.ipayroll.co.nz"><img src="images/iPayroll-sm.png" class="theme-logo" /></a></span>
			<nav id="main-navigation" class="mdl-navigation main-navigation">
				<a class="mdl-navigation__link active" href="#uploading" id="main-uploading">Uploading Timesheets</a>
			</nav>
		</div>
		<main class="mdl-layout__content">		

<!-- Uploading | START -->				
			<div id="uploading" class="mdl-grid mdl-grid--no-spacing">
  				<div class="mdl-cell mdl-cell--8-col mdl-cell--8-col-tablet">
					<div class="theme-padding-sm theme-padding-top">
						<h2>Uploading Timesheets</h2>
					</div>
				</div>
				<div class="mdl-cell mdl-cell--4-col theme-bg-secondary-grey mdl-cell--hide-tablet">
					
				</div>				
		<!-- Uploading - Timesheets | START -->				
					<div id="uploading-timesheets" class="mdl-cell mdl-cell--8-col mdl-cell--6-col-tablet">
						<div class="theme-padding">
							<h3>Timesheet Uploads File Format</h3>
							<p>iPayroll's system allows an authorised user to upload transactions (timesheets) into an open payroll. This option caters for integrating   software packages that can not use&nbsp;iPayroll's REST API, The following formats are available for use by developers:</p>
							<ul>
								<li>Spreadsheet (Multiple transactions) Format</li>
								<li>Standard (Single Transactions)Format</li>
							</ul>
							<h4>Spreadsheet Format</h4>
							<p>The spreadsheet (Multiple Transactions) format allows uploading of multiple transactions in each row.</p>
							<p>The following rules apply to the file:</p>
							<ol>
								<li> The file must be a comma delimited, ASCII file</li>
								<li> Each person starts on a new line.</li>
								<li> The first line is a header record containing (all on one line):-<br>
								id, name, T1, T1.5, BON, other, quantity, sickDays, from, to, reason, costCentre, message, Days in Period</li>
								<li> Names are optional and must not contain commas. (They are ignored - the id identifies the person).</li>
								<li> The columns "T1", "T1.5" and BON" can be replaced with any other elements, in any order.</li>
								<li> There may be any number of columns with payment or deduction ids, so for example, some Organisations pay their ordinary time day by day and would have columns for elements "MON", "TUE, "WED", "THU" etc. as well as other payments and deductions</li>
								<li>A row can contain several transactions.</li>
								<li> A person can have many transactions, split across several rows.</li>
								<li> Empty fields are acceptable.</li>
								<li> Leave Days are only applicable to leave balances that are held in days (generally Sick, Bereavement and Alternative Leave)Leave dates may be in dd/mm/yy or dd-mmm-yy format e.g. 15/1/13 or 15-Jan-13 (Year may be 2 or 4 digits e.g. 13 or 2013)</li>
								<li>Reasons only apply to leave transactions.</li>
								<li> If leave dates are not entered, then leave history is recorded as at period end date</li>
								<li> Blank lines in the file are ignored, as are lines beginning with #.</li>
								<li>A line starting with 'End of File' indicates remaining lines are ignored.</li>
								<li>Spaces between comma's, and at the beginning and end of each line are ignored.</li>
								<li>Quantities can have up to 2 decimal places, rates up to 4. (eg. quantity 40, 40.0 or 40.00).</li>
								<li>If a column starts with a dollar sign ($) it is interpreted as a rate override and paid with a quantity of 1.00.</li>
								<li>Text in the message column is appended to the person's payslip message.</li>
								<li>The costCentre, reason and message columns are optional.</li>
								<li>If a value is entered in 'costCentre' this overrides the default cost centre for every transaction in the line (e.g. if T1 AND AL were in the same line, and there was a cost centre override on that line, both T1 and AL would use the override cost centre)</li>
								<li>Any override cost centre on the timesheet upload file must exist in the Cost Centre setup for the Organisation</li>
								<li> For element ids in the "other" column, the qty may not be preceded by a $ value. If it is, display error message for line: "Quantity for element id should be number of hours, NOT a rate override" (e.g. "Quantity for AL-ADJ should be number of hours, NOT a rate override")</li>
								<li>If Organisation has ADP "Record Days on Timesheet" activated:
									<ol type="a">
										<li>  if the value in the "Days" column is not blank, replace the existing value in the "Days in period" field in current timesheet</li>
										<li> if value in the "Days" column is blank, do not update the "Days for period" field in current timesheet (i.e. leave existing value)</li>
									</ol>
								</li>
							</ol>
							<p>e.g.</p>
							<div class="table-responsive-vertical shadow-z-1">
								<table class="mdl-data-table theme-table-small">
									<thead class="theme-bg-image-blue">
										<tr>
											<th class="mdl-data-table__cell--non-numeric">#</th>
											<th class="mdl-data-table__cell--non-numeric">A</th>
											<th class="mdl-data-table__cell--non-numeric">B</th>
											<th class="mdl-data-table__cell--non-numeric">C</th>
											<th class="mdl-data-table__cell--non-numeric">D</th>
											<th class="mdl-data-table__cell--non-numeric">E</th>
											<th class="mdl-data-table__cell--non-numeric">F</th>
											<th class="mdl-data-table__cell--non-numeric">G</th>
											<th class="mdl-data-table__cell--non-numeric">H</th>
											<th class="mdl-data-table__cell--non-numeric">I</th>
											<th class="mdl-data-table__cell--non-numeric">J</th>
											<th class="mdl-data-table__cell--non-numeric">K</th>
											<th class="mdl-data-table__cell--non-numeric">L</th>
											<th class="mdl-data-table__cell--non-numeric">M</th>
											<th class="mdl-data-table__cell--non-numeric">N</th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<td data-label="#" class="mdl-data-table__cell--non-numeric">1</td>							
											<td data-label="A" class="mdl-data-table__cell--non-numeric">id</td>
											<td data-label="B" class="mdl-data-table__cell--non-numeric">name</td>
											<td data-label="C" class="mdl-data-table__cell--non-numeric">T1</td>
											<td data-label="D" class="mdl-data-table__cell--non-numeric">T1.5</td>
											<td data-label="E" class="mdl-data-table__cell--non-numeric">MEAL</td>
											<td data-label="F" class="mdl-data-table__cell--non-numeric">other</td>
											<td data-label="G" class="mdl-data-table__cell--non-numeric">quantity</td>
											<td data-label="H" class="mdl-data-table__cell--non-numeric">leaveDays</td>
											<td data-label="I" class="mdl-data-table__cell--non-numeric">from</td>
											<td data-label="J" class="mdl-data-table__cell--non-numeric">to</td>
											<td data-label="K" class="mdl-data-table__cell--non-numeric">reason</td>
											<td data-label="L" class="mdl-data-table__cell--non-numeric">cost centre</td>
											<td data-label="M" class="mdl-data-table__cell--non-numeric">message</td>
											<td data-label="N" class="mdl-data-table__cell--non-numeric">days in Period</td>
										</tr>
										<tr>
											<td data-label="#" class="mdl-data-table__cell--non-numeric">2</td>
											<td data-label="A" class="mdl-data-table__cell--non-numeric">boss</td>
											<td data-label="B" class="mdl-data-table__cell--non-numeric">MATTHEWS John</td>
											<td data-label="C" class="mdl-data-table__cell--non-numeric">24</td>
											<td data-label="D" class="mdl-data-table__cell--non-numeric">3</td>
											<td data-label="E" class="mdl-data-table__cell--non-numeric">$10.20</td>
											<td data-label="F" class="mdl-data-table__cell--non-numeric">AL</td>
											<td data-label="G" class="mdl-data-table__cell--non-numeric">16</td>
											<td data-label="H" class="mdl-data-table__cell--non-numeric"></td>
											<td data-label="I" class="mdl-data-table__cell--non-numeric">15-Jan-2013</td>
											<td data-label="J" class="mdl-data-table__cell--non-numeric">16-Jan-2013</td>
											<td data-label="K" class="mdl-data-table__cell--non-numeric"></td>
											<td data-label="L" class="mdl-data-table__cell--non-numeric"></td>
											<td data-label="M" class="mdl-data-table__cell--non-numeric"></td>
											<td data-label="N" class="mdl-data-table__cell--non-numeric"></td>
										</tr>
										<tr>
											<td data-label="#" class="mdl-data-table__cell--non-numeric">3</td>
											<td data-label="A" class="mdl-data-table__cell--non-numeric">boss</td>
											<td data-label="B" class="mdl-data-table__cell--non-numeric"></td>
											<td data-label="C" class="mdl-data-table__cell--non-numeric"></td>
											<td data-label="D" class="mdl-data-table__cell--non-numeric"></td>
											<td data-label="E" class="mdl-data-table__cell--non-numeric"></td>
											<td data-label="F" class="mdl-data-table__cell--non-numeric">SICK</td>
											<td data-label="G" class="mdl-data-table__cell--non-numeric">8</td>
											<td data-label="H" class="mdl-data-table__cell--non-numeric">1</td>
											<td data-label="I" class="mdl-data-table__cell--non-numeric">17-Jan-2013</td>
											<td data-label="J" class="mdl-data-table__cell--non-numeric"></td>
											<td data-label="K" class="mdl-data-table__cell--non-numeric"></td>
											<td data-label="L" class="mdl-data-table__cell--non-numeric"></td>
											<td data-label="M" class="mdl-data-table__cell--non-numeric"></td>
											<td data-label="N" class="mdl-data-table__cell--non-numeric"></td>
										</tr>
									</tbody>
								</table>
							</div>
							<p>&nbsp;</p>
<pre>
id,name,T1,T1.5,MEAL,other,quantity,leaveDays,from,to,reason,costCentre,message,Days in Period
boss,MATTHEWS John,24,3,$10.20,AL,,16,15-Jan-2013,16-Jan-2013
boss,,,,,SICK,8,1,17-Jan-2013
</pre>
      			
      				<p>This pays the person who has the id 'boss' 24 hours Ordinary Time (T1), 3 hours Overtime (T1.5), 1 Meal Allowance (MEAL) at a rate of $10.20, 16 hours Annual Leave (AL) for 15 to 16 Jan 2013 and 8 hours (1 day) Sick Leave (SICK) for 17-Jan-2013</p>					
					<h4>Standard Format</h4>
 					<p>The File must be in the following format:
        			</p><ul>
						<li>The file must be a comma delimited, ASCII file. </li>
						<li>Each transaction starts on a new line. </li>
						<li>Each line contains the following fields: personId, elementId, quantity. </li>
						<li>Each line can also, optionally, contain one to eight additional fields: costCentre, rate, leaveFrom, leaveTo, reason, leaveDays, days in period and pay periods.</li>
						<li>The cost centre field must be included if the rate field is present.(An empty cost centre is acceptable -e.g. boss,1,MEAL,,10.20). </li>
						<li>Empty fields are acceptable, e.g.boss,T1,40,,is the same asboss,T1,40 </li>
						<li>Leave dates may be in dd/mm/yy or dd-mmm-yy format e.g.15/1/13 or15-Jan-13 (Year may be 2 or 4 digits e.g. 13 or 2013) </li>
						<li>If leave dates are not entered, then leave history is recorded as at period end date </li>
						<li>Leave days are used if sick, alternative holiday and bereavement leave is recorded in days </li>
						<li>Blank lines in the file are ignored, as are lines beginning with #. </li>
						<li>A line starting with 'End of File' indicates remaining lines are ignored. </li>
						<li>Spaces between comma's, and at the beginning and end of each line are ignored. </li>
						<li>Quantities can have up to 2 decimal places, rates up to 4.(eg. quantity 40, 40.0 or 40.00). </li>
					</ul>
      				<p></p>
      				<p>e.g.</p>
<pre>	
boss,T1,40
boss, T1.5, 3, 2000

boss,MEAL,1,,10.20
#Here is the timesheet for Chris
chris,T1.5,0.5
chris,AL,8,,,15-Jan-2013
</pre>
					<p>This pays the person who has the id 'boss' 40 hours Ordinary Time (T1), 3 hours Overtime (T1.5) costed to cost centre '2000', and 1 Meal Allowance (MEAL) at a rate of $10.20. It also pays the person who has the id 'chris', 1/2 hour Overtime (T1.5) and 8 hours Annual Leave (AL).</p>


						</div>
					</div>
					<div class="mdl-cell mdl-cell--4-col theme-bg-secondary-grey mdl-cell--hide-tablet">
					
					</div>
		<!-- Uploading - Timesheets | END -->
			</div>			
<!-- Uploading | END -->		
		</main>
	</div>
<script src="js/jquery.core.js"></script>
<script src="js/material.core.js"></script>
<script src="js/theme.ipayroll.js"></script>	<script type="text/javascript">
		$(document).ready(function() {
			$('#menu-uploading').addClass('active');
		});
	</script>
	</body>
</html>
